{% extends 'base.html' %}
{% block content %}
<div class="container py-5">
    <h2 class="text-success"> {{ template_data.user.username }}'s Profile</h2>
  <hr class="border-success" />
  <p><strong>Username:</strong> {{ template_data.user.username }}</p>
  <p><strong>Team:</strong> {{ template_data.team }}</p>
  <p><strong>Email:</strong> {{ "charizard@fireball.edu" }}</p>
  <p><strong>Date Joined:</strong> {{ template_data.user.date_joined }}</p>
  <p><strong>Total Pokémon:</strong> {{ template_data.total_pokemon }}</p>

  {% if not template_data.is_friend %}
  <a href="{% url 'friends_page:add_friend' id=template_data.user.id %}" class="btn btn-success rounded-pill px-4">
    Friend Me!
  </a>
  {% else %}
    <button class="btn btn-secondary rounded-pill px-4" disabled>
        Already Friends
    </button>
  {% endif %}

  <h4 class="text-success mt-5">Their Pokémon Team:</h4>
  <div class="row">
    {% for pokemon in template_data.pokemons %}
    <div class="col-sm-6 col-md-4 col-lg-3 mb-4">
      <div class="card shadow-sm border-0 rounded-4 h-100 text-center" style="background-color: #f8fff8;">
        <div class="p-3">
          <img src="{{ pokemon.image }}" class="card-img-top rounded shadow-sm" style="height: 200px; object-fit: contain;" alt="{{ pokemon.name }}">
        </div>
        <div class="card-body">
          <!-- View Button -->
          <a href="{% url 'pokemons.show' id=pokemon.id %}" class="btn btn-success rounded-pill px-4">
            {{ pokemon.name|title }}
          </a>

          <!-- Trade Button (NEW) -->
          <a href="{% url 'accounts.trade' pokemon.id %}" class="btn btn-outline-success rounded-pill mt-2">
            Trade
          </a>

          <p class="text-success fw-semibold mt-2">${{ pokemon.price }}</p>
        </div>
      </div>
    </div>
    {% empty %}
    <div class="col text-center mt-4">
      <div class="alert alert-info">They don't have any Pokémon yet!</div>
    </div>
    {% endfor %}
  </div>
</div>
{% endblock content %}
